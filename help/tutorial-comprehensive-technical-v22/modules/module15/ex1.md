---
title: Apache Kafka簡介
description: Apache Kafka簡介
kt: 5342
audience: Data Engineer, Data Architect, Data Analyst
doc-type: tutorial
activity: develop
exl-id: 7b600c79-03c5-46fc-9ac9-a15599608c35
source-git-commit: cc7a77c4dd380ae1bc23dc75608e8e2224dfe78c
workflow-type: tm+mt
source-wordcount: '992'
ht-degree: 0%

---

# 15.1 Apache Kafka簡介

## 15.1.1導言

從資料的角度來看，每個組織都以非常簡單的方式開始。 組織的資料生態系統始於一個來源系統和一個目標。 源系統向目標系統發送資料，僅此而已。 輕鬆，對吧？
如果能保持如此簡單。 組織很快就超出了簡單的設定，源系統和目標系統的數量也迅速增加。 所有這些不同的來源和目的地都需要彼此交換資料，而事情很快就會變得非常複雜。
例如，如果組織有4個來源和6個目的地，而所有這些應用程式都需要彼此溝通，您就需要建置24個整合……這些整合各有其困難：

- 協定：資料傳輸方式(TCP、HTTP、REST、FTP、...)
- 資料格式：資料剖析方式（二進位、CSV、JSON、Parquet、...）
- 資料架構和演變：什麼是資料模型，它將如何演變？

此外，每次將源系統連接到目標系統時，這些系統從該連接中的負載都會增加。

你怎麼解決這個？ 這就是Apache Kafka的作品。 Apache Kafka可讓組織通過提供通用、高吞吐量的分佈式報文傳送系統來分離資料流和系統。 來源系統會將其資料傳送至Apache Kafka，而目的地系統將使用Apache Kafka的資料。

請思考企業必須管理的所有資料來源類型：

- 網站事件
- 行動應用程式事件
- POS事件
- CRM 資料
- callcenter資料
- 交易記錄
- ...

想想企業在其生態系統中使用的所有類型的目的地都可能需要來自這些來源系統的資料：

- CRM
- 資料湖
- 電子郵件系統
- 稽核
- analytics
- ...

Apache Kafka由LinkedIn建立，現在是主要由Confluent維護的開放原始碼專案。
Apache Kafka提供可容錯的分佈式、可復原的架構。 它可以橫向擴展到100個中間商，並且可以每秒擴展到數百萬條報文。 它提供低於10毫秒的高效能，非常適合即時使用情況。

幾個使用案例範例：

- 報文傳送系統
- 活動追蹤
- 從許多不同位置收集量度
- 應用程式日誌收集
- 串流處理（使用Kafka串流API或Spark）
- 系統依賴的解耦
- 與Spark、Flink、Storm、Hadoop和其他許多大資料技術整合。

例如：

- Netflix使用Kafka在您觀看電視節目時即時應用建議
- Uber使用Kafka即時收集用戶、計程車和行程資料，以即時計算和預測需求，並計算湧現定價
- linkedIn使用Kafka來防止垃圾訊息、收集使用者互動來即時提出更好的連線建議

在所有這些使用案例中，Kafka僅用作運輸機制。 Kafka非常擅長在應用程式之間移動資料。

## 15.1.2卡夫卡術語

### 訊息

消息是由系統發送到Kafka的通信。 訊息包含裝載，而裝載包含資料元素。 例如，網站傳送至Adobe Experience Platform的體驗事件會視為訊息。

### 主題、分區、偏移

主題是特定資料流，類似於資料庫中的表。 您可以有任意多個主題，並以主題名稱標識主題。 主題被拆分到分區中。 每個分區都按順序排列，分區內的每條消息都獲取一個增量ID，稱為 **偏移**. 消息儲存在主題、分區上，並使用偏移引用。 訊息只會保留有限的時間（預設為1週）。 一旦將消息寫入分區，就無法再更改該消息。

### 經紀人

代理與伺服器類似。 Kafka叢集由多個經紀人（伺服器）組成。 每個代理均以ID標識，並包含某些主題分區。

### 複寫

Kafka是一個分佈式系統。 分佈式系統的重要內容之一是，資料是安全儲存的，因此需要複製。 畢竟，當一個代理（伺服器）關閉時，另一個代理（伺服器）仍然能夠提供對最初儲存在已關閉的代理上的消息的訪問。 複製將建立跨多個代理的報文副本，以保證不會丟失任何資料。

### 製作者

如何將資料發送到Kafka? 這是製作人的角色。 製作者連接到源系統並從源系統獲取資料，然後將該資料寫入主題到分區。 根據Kafka群集的配置，生產商將自動知道要寫入的代理程式和分區。 在具有多個代理和複製策略的分佈式系統中，生產商將隨機儲存多個代理之間的資料，這意味著它將自動執行負載平衡。

### 訊息索引鍵

生產商可以選擇發送帶有消息的密鑰。 索引鍵可以是任何字串、數字等。 如果未提供密鑰，則會隨機向經紀人發送消息。 如果發送密鑰，則該密鑰的所有消息將始終轉到同一分區。 這樣的消息密鑰用於根據特定欄位來排序消息。

### 消費者

消費者從Apache Kafka主題讀取資料，然後與目的地系統共用該資料。 消費者知道要從哪個經紀人那裡閱讀。 每個分區內的資料由用戶按順序讀取。 消費者讀取消費者群組中的資料。

### Zookeeper

ZooKeeper本質上是分佈式系統的一種服務，提供分層密鑰值儲存，用於為大型分佈式系統提供分佈式配置服務、同步服務和命名註冊。 Zookeeper必須要執行，才能使用Apache Kafka，而Zookeeper是Kafka的典禮之主，管理後端的分散式服務，而Kafka產生並使用事件。

您已完成本練習。

下一步： [15.2安裝和配置您的Kafka群集](./ex2.md)

[返回模組15](./aep-apache-kafka.md)

[返回所有模組](../../overview.md)
